<!-- 202233207 김도연 -->
<!-- purchase.ejs -->
<table
  class="table table-bordered border-primary table-hover"
  style="text-align: center"
>
  <thead class="table-primary">
    <tr>
      <th>상품</th>
      <th>상품명</th>
      <th>단가</th>
      <th>구매량</th>
      <th>총금액</th>
      <th>구매일</th>
      <th>취소여부</th>
    </tr>
  </thead>
  <tbody>
    <% if (products && products.length > 0) { %> <%
    products.forEach(function(product) { %>
    <tr>
      <td>
        <% if (product.image) { %>
        <img
          src="/images/<%= product.image %>"
          style="width: 60px; height: auto"
        />
        <% } else { %>
        <span style="color: gray">이미지 없음</span>
        <% } %>
      </td>
      <td><%= product.name || '' %></td>
      <td>
        <%= product.price ? product.price.toLocaleString('ko-KR') : '' %> 원
      </td>
      <td><%= product.qty != null ? product.qty : '' %></td>
      <td>
        <%= product.total ? product.total.toLocaleString('ko-KR') : '' %> 원
      </td>
      <td>
        <% if (product.date) { %> <%= new
        Date(product.date).toLocaleString('ko-KR', { year: 'numeric', month:
        '2-digit', day: '2-digit', hour: '2-digit', minute: '2-digit', second:
        '2-digit' }) %> <% } else { %> &nbsp; <% } %>
      </td>
      <td>
        <% if (product.payYN === 'N') { %>
        <a href="/purchase/cancel/<%= product.purchase_id %>">구매취소</a>
        <% } else if (product.payYN === 'Y') { %> 취소된 상품 <% } %>
      </td>
    </tr>
    <% }); %> <% } else { %>
    <tr>
      <td colspan="7">구매 내역이 없습니다.</td>
    </tr>
    <% } %>
  </tbody>
</table>
